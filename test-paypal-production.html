<!DOCTYPE html>
<html>
<head>
    <title>Test PayPal Production SDK v6</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h1>Test PayPal Production SDK v6</h1>
    <div id="status">Loading...</div>
    <div id="paypal-button-container"></div>
    
    <script>
        // Test PayPal SDK v6 in production environment
        window.addEventListener('load', async function() {
            const statusDiv = document.getElementById('status');
            
            try {
                statusDiv.innerHTML = 'Checking PayPal SDK availability...';
                
                // Check if PayPal SDK is available
                if (typeof window.paypal === 'undefined') {
                    // Load PayPal SDK dynamically
                    statusDiv.innerHTML = 'Loading PayPal SDK...';
                    
                    const script = document.createElement('script');
                    script.src = 'https://www.paypal.com/web-sdk/v6/core';
                    script.async = true;
                    
                    script.onload = async function() {
                        await initializePayPal();
                    };
                    
                    script.onerror = function() {
                        statusDiv.innerHTML = '❌ Error: Failed to load PayPal SDK';
                    };
                    
                    document.head.appendChild(script);
                } else {
                    await initializePayPal();
                }
            } catch (error) {
                statusDiv.innerHTML = `❌ Error: ${error.message}`;
                console.error('PayPal SDK test error:', error);
            }
        });
        
        async function initializePayPal() {
            const statusDiv = document.getElementById('status');
            
            try {
                statusDiv.innerHTML = 'PayPal SDK loaded. Creating instance...';
                
                // In a real application, you would get this token from your server
                // For testing purposes, we'll show how it should work
                statusDiv.innerHTML = `
                    <p>✅ PayPal SDK loaded successfully!</p>
                    <p>To test with a real client token:</p>
                    <ol>
                        <li>Start your StreamFlix server</li>
                        <li>Log in to the application</li>
                        <li>Go to the subscription page</li>
                        <li>The PayPal button should appear and function correctly</li>
                    </ol>
                    <p>Current configuration:</p>
                    <ul>
                        <li>SDK URL: https://www.paypal.com/web-sdk/v6/core</li>
                        <li>Mode: Production</li>
                    </ul>
                `;
                
                // Show a placeholder button
                const paypalButton = document.createElement('button');
                paypalButton.textContent = 'PayPal Button (Placeholder)';
                paypalButton.style.cssText = `
                    background: #ffc439;
                    border: none;
                    border-radius: 4px;
                    color: #111;
                    padding: 12px 24px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    width: 100%;
                    max-width: 300px;
                `;
                
                paypalButton.addEventListener('click', function() {
                    alert('In a real application, this would initiate the PayPal payment flow with a client token from your server.');
                });
                
                document.getElementById('paypal-button-container').appendChild(paypalButton);
                
            } catch (error) {
                statusDiv.innerHTML = `❌ Error initializing PayPal: ${error.message}`;
                console.error('PayPal initialization error:', error);
            }
        }
    </script>
</body>
</html>